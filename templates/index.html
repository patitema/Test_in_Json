<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Главная — Сайт для Тестов</title>

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/index.css') }}" />
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li><a href="{{ url_for('index') }}">Тесты</a></li>
          {% if user %}
          <li>
            <a href="{{ url_for('profile') }}">Профиль ({{ user.username }})</a>
          </li>
          <li>
            <a href="{{ url_for('logout') }}" class="logout-link">Выйти</a>
          </li>
          {% else %}
          <li><a href="{{ url_for('login') }}">Войти</a></li>
          <li><a href="{{ url_for('register') }}">Регистрация</a></li>
          {% endif %}
        </ul>
      </nav>
    </header>
    <main>
      <div class="main-container">
        <h1>Доступные Тесты</h1>

        {% if tests %}
        <ul class="tests-list">
          {% for test in tests %}
          <li class="test-card">
            <h2 class="title-test">{{ test.title }}</h2>
            <p class="description-test">{{ test.description }}</p>

            <div class="test-actions">
              <a
                href="{{ url_for('test_start', test_id=test.id) }}"
                class="start-test-btn">
                Пройти тест
              </a>

              {% if user and user.is_admin %}
              <a
                href="{{ url_for('test_results', test_id=test.id) }}"
                class="stats-test-btn">
                Результаты
              </a>

              <form
                method="POST"
                action="{{ url_for('delete_test', test_id=test.id) }}"
                onsubmit="return confirm('Вы уверены, что хотите удалить тест &quot;{{ test.title }}&quot;?');"
                style="display: inline-block; margin-left: 10px">
                <button type="submit" class="delete-test-btn">Удалить</button>
              </form>
              {% endif %}
            </div>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p class="no-tests-message">На данный момент нет доступных тестов.</p>
        {% endif %} {% if user and user.is_admin %}
        <div class="admin-action-block">
          <a
            href="{{ url_for('create_test') }}"
            class="submit-btn admin-btn"
            style="width: auto">
            + Добавить Тест
          </a>
        </div>
        {% endif %}
      </div>
    </main>

    <footer>
      <p>&copy; 2025 Сайт Тестов</p>
    </footer>
  </body>
</html>
